# アプリケーション仕様書

## 1. 概要

本アプリケーションは、動画ファイルからテキストベースのドキュメント（マニュアルまたは仕様書）を自動生成するデスクトップアプリケーションである。GoogleのGemini Pro APIを活用し、macOSおよびWindows上で動作する。

## 2. 機能要件

### 2.1. コア機能

- ユーザーは、ローカルから複数の動画ファイル（例: .mp4, .mov）を選択できる。
- 選択された動画を基に、テキストドキュメントを生成する。
- 生成するドキュメントの種類は「マニュアルモード」と「仕様書モード」から選択できる。

### 2.2. モード設定

アプリケーションの設定画面にて、以下の2つのモードを切り替えられる。

- **マニュアル作成モード**: 動画の内容を手順や操作方法として解説する形式のドキュメントを生成する。
- **仕様書作成モード**: 動画の内容を機能や動作の仕様として記述する形式のドキュメントを生成する。

### 2.3. 動画処理

- **ファイル選択**: 複数の動画ファイルを同時に選択し、処理対象とすることができる。
- **長時間動画の分割**: 1時間を超える動画ファイルが入力された場合、ffmpegを使用して1時間未満のセグメントに自動で分割する。
- **API連携**: 動画ファイルはGemini APIのFile APIを利用してアップロードする。アップロード後、`gemini-2.5-pro-preview`相当のモデルに対してドキュメント生成をリクエストする。
- **ドキュメント統合**: 複数の動画ファイルや分割されたセグメントから生成されたドキュメントを、最終的に1つのまとまったドキュメントとして統合し、ユーザーに提示する。

## 3. 技術仕様

- **フレームワーク**: Tauri
- **言語**:
    - フロントエンド: TypeScript, React
    - バックエンド: Rust
- **外部API**: Google Gemini API
- **外部ライブラリ**:
    - ffmpeg（動画処理用）
- **対応プラットフォーム**:
    - Windows
    - macOS
- **対応動画形式**:
    - `video/mp4`, `video/mpeg`, `video/mov`, `video/avi`, `video/x-flv`, `video/mpg`, `video/webm`, `video/wmv`, `video/3gpp`

## 4. 画面構成（案）

- **メイン画面**:
    - ファイル選択エリア（ドラッグ＆ドロップ対応）
    - 選択されたファイルリスト
    - ドキュメント生成ボタン
    - 生成結果表示エリア
- **設定画面**:
    - モード選択（マニュアルモード / 仕様書モード）
    - APIキー設定欄

## 5. 非機能要件

- **パフォーマンス**: 大容量の動画ファイルでも安定して動作すること。
- **UI/UX**: 直感的で分かりやすいインターフェイスを提供する。
- **セキュリティ**: APIキーはローカルに安全に保存されること。 
